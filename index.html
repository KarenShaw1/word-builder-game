<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Word Builder Game</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body {
    background-color: #ffc0cb; /* pink background */
    font-family: 'Comfortaa', cursive;
  }
  .success-pulse {
    animation: pulse 1s ease-out;
  }
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }
</style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-6">

  <div class="bg-white rounded-2xl p-6 shadow-lg w-full max-w-md text-center">
    <h1 class="text-3xl font-bold mb-4 text-pink-700">Word Builder</h1>

    <div id="imageContainer" class="mb-4"></div>
    <div id="dropZone" class="flex justify-center gap-2 mb-4"></div>
    <div id="tilesContainer" class="flex flex-wrap justify-center gap-2 mb-4"></div>

    <button id="checkButton" class="bg-pink-600 text-white px-4 py-2 rounded-lg hover:bg-pink-700 disabled:opacity-50">Check</button>
    <button id="nextButton" class="bg-pink-400 text-white px-4 py-2 rounded-lg hover:bg-pink-500 ml-2 disabled:opacity-50">Next</button>

    <p id="feedbackMessage" class="mt-4 text-lg font-semibold"></p>
    <p id="scoreDisplay" class="mt-2 text-gray-700"></p>
  </div>

<script>
const wordData = [
  { image: "https://cdn-icons-png.flaticon.com/512/616/616408.png", word: "CAT", tiles: ["C","A","T"] },
  { image: "https://cdn-icons-png.flaticon.com/512/616/6164081.png", word: "DOG", tiles: ["D","O","G"] },
  { image: "https://cdn-icons-png.flaticon.com/512/616/616554.png", word: "SUN", tiles: ["S","U","N"] }
];

let currentWordIndex = 0;
let currentWord = wordData[currentWordIndex];
let placedTiles = [];
let attemptsLeft = 2;
let score = 0;

// --- Rendering Functions ---
function renderImage(wordObj) {
  const imageContainer = document.getElementById("imageContainer");
  imageContainer.innerHTML = `<img src="${wordObj.image}" alt="${wordObj.word}" class="w-32 mx-auto">`;
}

function renderDropSlots(wordObj) {
  const dropZone = document.getElementById("dropZone");
  dropZone.innerHTML = "";
  placedTiles = [];
  wordObj.word.split("").forEach(() => {
    const slot = document.createElement("div");
    slot.className = "drop-slot w-12 h-12 border-2 border-pink-400 rounded-lg bg-pink-100 flex items-center justify-center text-xl font-bold";
    slot.addEventListener("dragover", e => e.preventDefault());
    slot.addEventListener("drop", handleDrop);
    dropZone.appendChild(slot);
  });
}

function renderDraggableTiles(wordObj) {
  const tilesContainer = document.getElementById("tilesContainer");
  tilesContainer.innerHTML = "";
  const shuffled = [...wordObj.tiles].sort(() => Math.random() - 0.5);
  shuffled.forEach(letter => {
    const tile = document.createElement("div");
    tile.textContent = letter;
    tile.draggable = true;
    tile.className = "w-12 h-12 flex items-center justify-center bg-pink-200 border-2 border-pink-400 rounded-lg font-bold text-xl cursor-move";
    tile.addEventListener("dragstart", handleDragStart);
    tilesContainer.appendChild(tile);
  });
}

// --- Drag Functions ---
let draggedTile = null;
function handleDragStart(e) {
  draggedTile = e.target;
}
function handleDrop(e) {
  if (!draggedTile) return;
  if (e.target.textContent === "") {
    e.target.textContent = draggedTile.textContent;
    placedTiles.push(draggedTile.textContent);
    draggedTile.remove();
  }
}

// --- Game Logic ---
function checkWord() {
  const formedWord = placedTiles.join("");
  const feedback = document.getElementById("feedbackMessage");
  const checkButton = document.getElementById("checkButton");
  const nextButton = document.getElementById("nextButton");

  if (formedWord === currentWord.word) {
    feedback.textContent = "Ka pai! That's correct! ðŸ˜„";
    feedback.className = "text-green-700 font-bold mt-4";
    score++;
    checkButton.disabled = true;
    nextButton.disabled = false;
  } else {
    attemptsLeft--;
    if (attemptsLeft > 0) {
      feedback.textContent = `Try again! You have ${attemptsLeft} attempt(s) left.`;
      feedback.className = "text-red-600 font-bold mt-4";
    } else {
      feedback.textContent = `Out of attempts! The correct word was ${currentWord.word}.`;
      feedback.className = "text-red-600 font-bold mt-4";
      nextButton.disabled = false;
      checkButton.disabled = true;
    }
  }
  updateScoreDisplay();
}

function loadNextWord() {
  currentWordIndex++;
  const feedback = document.getElementById("feedbackMessage");
  feedback.textContent = "";
  if (currentWordIndex < wordData.length) {
    currentWord = wordData[currentWordIndex];
    attemptsLeft = 2;
    renderImage(currentWord);
    renderDropSlots(currentWord);
    renderDraggableTiles(currentWord);
    document.getElementById("checkButton").disabled = false;
    document.getElementById("nextButton").disabled = true;
  } else {
    endGame();
  }
}

function updateScoreDisplay() {
  document.getElementById("scoreDisplay").textContent =
    `Score: ${score} / ${wordData.length}`;
}

function endGame() {
  const container = document.querySelector(".bg-white");
  const percent = (score / wordData.length) * 100;
  const message = percent >= 50 ? "ðŸŽ‰ Well done! ðŸ˜„" : "Try again! ðŸ˜¢";
  container.innerHTML = `
    <h2 class="text-2xl font-bold mb-4 text-pink-700">Game Over</h2>
    <p class="text-xl mb-2">Your final score: ${score} / ${wordData.length}</p>
    <p class="text-2xl font-semibold">${message}</p>
  `;
}

// --- Event Listeners ---
document.getElementById("checkButton").addEventListener("click", checkWord);
document.getElementById("nextButton").addEventListener("click", loadNextWord);

// --- Initialize Game ---
window.onload = function() {
  renderImage(currentWord);
  renderDropSlots(currentWord);
  renderDraggableTiles(currentWord);
  updateScoreDisplay();
  document.getElementById("nextButton").disabled = true;
};
</script>

</body>
</html>
